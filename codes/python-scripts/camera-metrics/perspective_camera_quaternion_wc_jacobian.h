inline void observation_equation_perspective_camera_quaternion_wc(Eigen::Matrix<double, 2, 1> &delta, double fx, double fy, double cx, double cy, double px, double py, double pz, double q0, double q1, double q2, double q3, double tie_px, double tie_py, double tie_pz, double u_kp, double v_kp)
{delta.coeffRef(0,0) = -cx - 1.0*fx*(px*(2*pow(q2, 2) + 2*pow(q3, 2) - 1) + py*(-2.0*q0*q3 - 2.0*q1*q2) + pz*(2.0*q0*q2 - 2.0*q1*q3) + tie_px*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1) + tie_py*(2.0*q0*q3 + 2.0*q1*q2) + tie_pz*(-2.0*q0*q2 + 2.0*q1*q3))/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1)) + u_kp;
delta.coeffRef(1,0) = -cy - 1.0*fy*(px*(2.0*q0*q3 - 2.0*q1*q2) + py*(2*pow(q1, 2) + 2*pow(q3, 2) - 1) + pz*(-2.0*q0*q1 - 2.0*q2*q3) + tie_px*(-2.0*q0*q3 + 2.0*q1*q2) + tie_py*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1) + tie_pz*(2.0*q0*q1 + 2.0*q2*q3))/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1)) + v_kp;
}
inline void observation_equation_perspective_camera_quaternion_wc_jacobian(Eigen::Matrix<double, 2, 10, Eigen::RowMajor> &j, double fx, double fy, double cx, double cy, double px, double py, double pz, double q0, double q1, double q2, double q3, double tie_px, double tie_py, double tie_pz)
{j.coeffRef(0,0) = -1.0*fx*(2.0*q0*q2 + 2.0*q1*q3)*(px*(2*pow(q2, 2) + 2*pow(q3, 2) - 1) + py*(-2.0*q0*q3 - 2.0*q1*q2) + pz*(2.0*q0*q2 - 2.0*q1*q3) + tie_px*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1) + tie_py*(2.0*q0*q3 + 2.0*q1*q2) + tie_pz*(-2.0*q0*q2 + 2.0*q1*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fx*(2*pow(q2, 2) + 2*pow(q3, 2) - 1)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(0,1) = -1.0*fx*(-2.0*q0*q1 + 2.0*q2*q3)*(px*(2*pow(q2, 2) + 2*pow(q3, 2) - 1) + py*(-2.0*q0*q3 - 2.0*q1*q2) + pz*(2.0*q0*q2 - 2.0*q1*q3) + tie_px*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1) + tie_py*(2.0*q0*q3 + 2.0*q1*q2) + tie_pz*(-2.0*q0*q2 + 2.0*q1*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fx*(-2.0*q0*q3 - 2.0*q1*q2)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(0,2) = -1.0*fx*(2.0*q0*q2 - 2.0*q1*q3)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1)) - 1.0*fx*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1)*(px*(2*pow(q2, 2) + 2*pow(q3, 2) - 1) + py*(-2.0*q0*q3 - 2.0*q1*q2) + pz*(2.0*q0*q2 - 2.0*q1*q3) + tie_px*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1) + tie_py*(2.0*q0*q3 + 2.0*q1*q2) + tie_pz*(-2.0*q0*q2 + 2.0*q1*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2);
j.coeffRef(0,3) = -1.0*fx*(2.0*px*q2 - 2.0*py*q1 + 2.0*q1*tie_py - 2.0*q2*tie_px)*(px*(2*pow(q2, 2) + 2*pow(q3, 2) - 1) + py*(-2.0*q0*q3 - 2.0*q1*q2) + pz*(2.0*q0*q2 - 2.0*q1*q3) + tie_px*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1) + tie_py*(2.0*q0*q3 + 2.0*q1*q2) + tie_pz*(-2.0*q0*q2 + 2.0*q1*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fx*(-2.0*py*q3 + 2.0*pz*q2 - 2.0*q2*tie_pz + 2.0*q3*tie_py)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(0,4) = -1.0*fx*(-2.0*py*q2 - 2.0*pz*q3 + 2.0*q2*tie_py + 2.0*q3*tie_pz)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1)) - 1.0*fx*(2.0*px*q3 - 2.0*py*q0 - 4*pz*q1 + 2.0*q0*tie_py + 4*q1*tie_pz - 2.0*q3*tie_px)*(px*(2*pow(q2, 2) + 2*pow(q3, 2) - 1) + py*(-2.0*q0*q3 - 2.0*q1*q2) + pz*(2.0*q0*q2 - 2.0*q1*q3) + tie_px*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1) + tie_py*(2.0*q0*q3 + 2.0*q1*q2) + tie_pz*(-2.0*q0*q2 + 2.0*q1*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2);
j.coeffRef(0,5) = -1.0*fx*(2.0*px*q0 + 2.0*py*q3 - 4*pz*q2 - 2.0*q0*tie_px + 4*q2*tie_pz - 2.0*q3*tie_py)*(px*(2*pow(q2, 2) + 2*pow(q3, 2) - 1) + py*(-2.0*q0*q3 - 2.0*q1*q2) + pz*(2.0*q0*q2 - 2.0*q1*q3) + tie_px*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1) + tie_py*(2.0*q0*q3 + 2.0*q1*q2) + tie_pz*(-2.0*q0*q2 + 2.0*q1*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fx*(4*px*q2 - 2.0*py*q1 + 2.0*pz*q0 - 2.0*q0*tie_pz + 2.0*q1*tie_py - 4*q2*tie_px)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(0,6) = -1.0*fx*(2.0*px*q1 + 2.0*py*q2 - 2.0*q1*tie_px - 2.0*q2*tie_py)*(px*(2*pow(q2, 2) + 2*pow(q3, 2) - 1) + py*(-2.0*q0*q3 - 2.0*q1*q2) + pz*(2.0*q0*q2 - 2.0*q1*q3) + tie_px*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1) + tie_py*(2.0*q0*q3 + 2.0*q1*q2) + tie_pz*(-2.0*q0*q2 + 2.0*q1*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fx*(4*px*q3 - 2.0*py*q0 - 2.0*pz*q1 + 2.0*q0*tie_py + 2.0*q1*tie_pz - 4*q3*tie_px)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(0,7) = -1.0*fx*(-2.0*q0*q2 - 2.0*q1*q3)*(px*(2*pow(q2, 2) + 2*pow(q3, 2) - 1) + py*(-2.0*q0*q3 - 2.0*q1*q2) + pz*(2.0*q0*q2 - 2.0*q1*q3) + tie_px*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1) + tie_py*(2.0*q0*q3 + 2.0*q1*q2) + tie_pz*(-2.0*q0*q2 + 2.0*q1*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fx*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(0,8) = -1.0*fx*(2.0*q0*q1 - 2.0*q2*q3)*(px*(2*pow(q2, 2) + 2*pow(q3, 2) - 1) + py*(-2.0*q0*q3 - 2.0*q1*q2) + pz*(2.0*q0*q2 - 2.0*q1*q3) + tie_px*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1) + tie_py*(2.0*q0*q3 + 2.0*q1*q2) + tie_pz*(-2.0*q0*q2 + 2.0*q1*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fx*(2.0*q0*q3 + 2.0*q1*q2)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(0,9) = -1.0*fx*(-2.0*q0*q2 + 2.0*q1*q3)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1)) - 1.0*fx*(2*pow(q1, 2) + 2*pow(q2, 2) - 1)*(px*(2*pow(q2, 2) + 2*pow(q3, 2) - 1) + py*(-2.0*q0*q3 - 2.0*q1*q2) + pz*(2.0*q0*q2 - 2.0*q1*q3) + tie_px*(-2*pow(q2, 2) - 2*pow(q3, 2) + 1) + tie_py*(2.0*q0*q3 + 2.0*q1*q2) + tie_pz*(-2.0*q0*q2 + 2.0*q1*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2);
j.coeffRef(1,0) = -1.0*fy*(2.0*q0*q2 + 2.0*q1*q3)*(px*(2.0*q0*q3 - 2.0*q1*q2) + py*(2*pow(q1, 2) + 2*pow(q3, 2) - 1) + pz*(-2.0*q0*q1 - 2.0*q2*q3) + tie_px*(-2.0*q0*q3 + 2.0*q1*q2) + tie_py*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1) + tie_pz*(2.0*q0*q1 + 2.0*q2*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fy*(2.0*q0*q3 - 2.0*q1*q2)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(1,1) = -1.0*fy*(-2.0*q0*q1 + 2.0*q2*q3)*(px*(2.0*q0*q3 - 2.0*q1*q2) + py*(2*pow(q1, 2) + 2*pow(q3, 2) - 1) + pz*(-2.0*q0*q1 - 2.0*q2*q3) + tie_px*(-2.0*q0*q3 + 2.0*q1*q2) + tie_py*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1) + tie_pz*(2.0*q0*q1 + 2.0*q2*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fy*(2*pow(q1, 2) + 2*pow(q3, 2) - 1)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(1,2) = -1.0*fy*(-2.0*q0*q1 - 2.0*q2*q3)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1)) - 1.0*fy*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1)*(px*(2.0*q0*q3 - 2.0*q1*q2) + py*(2*pow(q1, 2) + 2*pow(q3, 2) - 1) + pz*(-2.0*q0*q1 - 2.0*q2*q3) + tie_px*(-2.0*q0*q3 + 2.0*q1*q2) + tie_py*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1) + tie_pz*(2.0*q0*q1 + 2.0*q2*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2);
j.coeffRef(1,3) = -1.0*fy*(2.0*px*q2 - 2.0*py*q1 + 2.0*q1*tie_py - 2.0*q2*tie_px)*(px*(2.0*q0*q3 - 2.0*q1*q2) + py*(2*pow(q1, 2) + 2*pow(q3, 2) - 1) + pz*(-2.0*q0*q1 - 2.0*q2*q3) + tie_px*(-2.0*q0*q3 + 2.0*q1*q2) + tie_py*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1) + tie_pz*(2.0*q0*q1 + 2.0*q2*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fy*(2.0*px*q3 - 2.0*pz*q1 + 2.0*q1*tie_pz - 2.0*q3*tie_px)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(1,4) = -1.0*fy*(-2.0*px*q2 + 4*py*q1 - 2.0*pz*q0 + 2.0*q0*tie_pz - 4*q1*tie_py + 2.0*q2*tie_px)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1)) - 1.0*fy*(2.0*px*q3 - 2.0*py*q0 - 4*pz*q1 + 2.0*q0*tie_py + 4*q1*tie_pz - 2.0*q3*tie_px)*(px*(2.0*q0*q3 - 2.0*q1*q2) + py*(2*pow(q1, 2) + 2*pow(q3, 2) - 1) + pz*(-2.0*q0*q1 - 2.0*q2*q3) + tie_px*(-2.0*q0*q3 + 2.0*q1*q2) + tie_py*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1) + tie_pz*(2.0*q0*q1 + 2.0*q2*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2);
j.coeffRef(1,5) = -1.0*fy*(-2.0*px*q1 - 2.0*pz*q3 + 2.0*q1*tie_px + 2.0*q3*tie_pz)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1)) - 1.0*fy*(2.0*px*q0 + 2.0*py*q3 - 4*pz*q2 - 2.0*q0*tie_px + 4*q2*tie_pz - 2.0*q3*tie_py)*(px*(2.0*q0*q3 - 2.0*q1*q2) + py*(2*pow(q1, 2) + 2*pow(q3, 2) - 1) + pz*(-2.0*q0*q1 - 2.0*q2*q3) + tie_px*(-2.0*q0*q3 + 2.0*q1*q2) + tie_py*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1) + tie_pz*(2.0*q0*q1 + 2.0*q2*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2);
j.coeffRef(1,6) = -1.0*fy*(2.0*px*q1 + 2.0*py*q2 - 2.0*q1*tie_px - 2.0*q2*tie_py)*(px*(2.0*q0*q3 - 2.0*q1*q2) + py*(2*pow(q1, 2) + 2*pow(q3, 2) - 1) + pz*(-2.0*q0*q1 - 2.0*q2*q3) + tie_px*(-2.0*q0*q3 + 2.0*q1*q2) + tie_py*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1) + tie_pz*(2.0*q0*q1 + 2.0*q2*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fy*(2.0*px*q0 + 4*py*q3 - 2.0*pz*q2 - 2.0*q0*tie_px + 2.0*q2*tie_pz - 4*q3*tie_py)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(1,7) = -1.0*fy*(-2.0*q0*q2 - 2.0*q1*q3)*(px*(2.0*q0*q3 - 2.0*q1*q2) + py*(2*pow(q1, 2) + 2*pow(q3, 2) - 1) + pz*(-2.0*q0*q1 - 2.0*q2*q3) + tie_px*(-2.0*q0*q3 + 2.0*q1*q2) + tie_py*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1) + tie_pz*(2.0*q0*q1 + 2.0*q2*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fy*(-2.0*q0*q3 + 2.0*q1*q2)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(1,8) = -1.0*fy*(2.0*q0*q1 - 2.0*q2*q3)*(px*(2.0*q0*q3 - 2.0*q1*q2) + py*(2*pow(q1, 2) + 2*pow(q3, 2) - 1) + pz*(-2.0*q0*q1 - 2.0*q2*q3) + tie_px*(-2.0*q0*q3 + 2.0*q1*q2) + tie_py*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1) + tie_pz*(2.0*q0*q1 + 2.0*q2*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2) - 1.0*fy*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1));
j.coeffRef(1,9) = -1.0*fy*(2.0*q0*q1 + 2.0*q2*q3)/(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1)) - 1.0*fy*(2*pow(q1, 2) + 2*pow(q2, 2) - 1)*(px*(2.0*q0*q3 - 2.0*q1*q2) + py*(2*pow(q1, 2) + 2*pow(q3, 2) - 1) + pz*(-2.0*q0*q1 - 2.0*q2*q3) + tie_px*(-2.0*q0*q3 + 2.0*q1*q2) + tie_py*(-2*pow(q1, 2) - 2*pow(q3, 2) + 1) + tie_pz*(2.0*q0*q1 + 2.0*q2*q3))/pow(px*(-2.0*q0*q2 - 2.0*q1*q3) + py*(2.0*q0*q1 - 2.0*q2*q3) + pz*(2*pow(q1, 2) + 2*pow(q2, 2) - 1) + tie_px*(2.0*q0*q2 + 2.0*q1*q3) + tie_py*(-2.0*q0*q1 + 2.0*q2*q3) + tie_pz*(-2*pow(q1, 2) - 2*pow(q2, 2) + 1), 2);
}